<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="class.js" type="text/javascript" charset="utf-8"></script>
    <script src="block.js" type="text/javascript" charset="utf-8"></script>
    <script src="shape.js" type="text/javascript" charset="utf-8"></script>
    <script src="o.js" type="text/javascript" charset="utf-8"></script>
    <script src="l.js" type="text/javascript" charset="utf-8"></script>
    <script src="t.js" type="text/javascript" charset="utf-8"></script>
    <script src="j.js" type="text/javascript" charset="utf-8"></script>
    <script src="i.js" type="text/javascript" charset="utf-8"></script>
    <script src="s.js" type="text/javascript" charset="utf-8"></script>
    <script src="z.js" type="text/javascript" charset="utf-8"></script>
    <script src="control.js" type="text/javascript" charset="utf-8"></script>
    <script src="draw.js" type="text/javascript" charset="utf-8"></script>
    <script src="block_fall.js" type="text/javascript" charset="utf-8"></script>
    <script src="create_shape.js" type="text/javascript" charset="utf-8"></script>
    <script src="collision_detection.js" type="text/javascript" charset="utf-8"></script>
    <title>Game</title>
  </head>
  <body>
    <script type="text/javascript">
var blockFall = new window.BlockFall(new CreateShape());

(function() {
    var onEachFrame;
    if (window.webkitRequestAnimationFrame) {
        onEachFrame = function(cb) {
            var _cb = function() { cb(); webkitRequestAnimationFrame(_cb); }
            _cb();
        };
    } else if (window.mozRequestAnimationFrame) {
        onEachFrame = function(cb) {
            var _cb = function() { cb(); mozRequestAnimationFrame(_cb); }
            _cb();
        };
    } else {
        onEachFrame = function(cb) {
            setInterval(cb, 1000 / 60);
        }
    }
    
    window.onEachFrame = onEachFrame;
})();

var control = new Control();
window.onEachFrame(function() {
    if (control.isMovingRight())
        blockFall.moveRight();
    if (control.isMovingLeft())
        blockFall.moveLeft();
    if (control.isRotatingClockwise())
        blockFall.rotate();
    if (control.isRotatingCounterClockwise())
        blockFall.rotateCounterClockwise();

    if (control.isHardDropping())
        blockFall.hardDrop();


    blockFall.drawScreen(); 

    var speedFall = control.isSoftDropping();
    blockFall.update(speedFall);

});

    </script>
  </body>
</html>
